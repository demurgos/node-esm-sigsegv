"use strict";
/**
 * This module defines utility functions to detect and change case styles.
 *
 * @module kryo/case-style
 */
Object.defineProperty(exports, "__esModule", { value: true });
const incident_1 = require("incident");
var CaseStyle;
(function (CaseStyle) {
    CaseStyle[CaseStyle["CamelCase"] = 0] = "CamelCase";
    CaseStyle[CaseStyle["PascalCase"] = 1] = "PascalCase";
    CaseStyle[CaseStyle["SnakeCase"] = 2] = "SnakeCase";
    CaseStyle[CaseStyle["ScreamingSnakeCase"] = 3] = "ScreamingSnakeCase";
    CaseStyle[CaseStyle["KebabCase"] = 4] = "KebabCase";
})(CaseStyle = exports.CaseStyle || (exports.CaseStyle = {}));
function detectCaseStyle(identifier) {
    if (/^[A-Z]+[0-9]*(?:_[A-Z]+[0-9]*)*$/.test(identifier)) {
        return CaseStyle.ScreamingSnakeCase;
    }
    else if (/^[a-z]+[0-9]*(?:_[a-z]+[0-9]*)+$/.test(identifier)) {
        return CaseStyle.SnakeCase;
    }
    else if (/^[a-z]+[0-9]*(?:-[a-z]+[0-9]*)+$/.test(identifier)) {
        return CaseStyle.KebabCase;
    }
    else if (/^[A-Z]/.test(identifier)) {
        return CaseStyle.PascalCase;
    }
    else {
        return CaseStyle.CamelCase;
    }
}
exports.detectCaseStyle = detectCaseStyle;
function split(caseStyle, identifier) {
    switch (caseStyle) {
        case CaseStyle.ScreamingSnakeCase:
            return identifier.toLowerCase().split("_");
        case CaseStyle.SnakeCase:
            return identifier.toLowerCase().split("_");
        case CaseStyle.KebabCase:
            return identifier.toLowerCase().split("-");
        case CaseStyle.CamelCase:
            return identifier.split(/(?=[A-Z])/).map((part) => part.toLowerCase());
        case CaseStyle.PascalCase:
            return identifier.split(/(?=[A-Z])/).map((part) => part.toLowerCase());
        default:
            throw new incident_1.Incident(`IncompleteSwitch: Received unexpected variant for caseStyle: ${caseStyle}`);
    }
}
exports.split = split;
function join(caseStyle, parts) {
    switch (caseStyle) {
        case CaseStyle.ScreamingSnakeCase:
            return parts.join("_").toUpperCase();
        case CaseStyle.SnakeCase:
            return parts.join("_").toLowerCase();
        case CaseStyle.KebabCase:
            return parts.join("-").toLowerCase();
        case CaseStyle.CamelCase:
            return parts.map((part, index) => {
                const upperLength = index === 0 ? 0 : 1;
                return part.substr(0, upperLength).toUpperCase() + part.substring(upperLength).toLowerCase();
            }).join("");
        case CaseStyle.PascalCase:
            return parts.map((part) => {
                return part.substr(0, 1).toUpperCase() + part.substring(1).toLowerCase();
            }).join("");
        default:
            throw new incident_1.Incident(`IncompleteSwitch: Received unexpected variant for caseStyle: ${caseStyle}`);
    }
}
exports.join = join;
function rename(identifier, from, to) {
    if (to === undefined) {
        to = from;
        from = detectCaseStyle(identifier);
    }
    return join(to, split(from, identifier));
}
exports.rename = rename;
function renameMap(keys, to) {
    const result = new Map();
    const outKeys = new Set();
    for (const key of keys) {
        const renamed = to === undefined ? key : rename(key, to);
        result.set(renamed, key);
        if (outKeys.has(renamed)) {
            throw new incident_1.Incident("NonBijectiveKeyRename", "Some keys are the same after renaming");
        }
        outKeys.add(renamed);
    }
    return result;
}
exports.renameMap = renameMap;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvY2FzZS1zdHlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7QUFFSCx1Q0FBb0M7QUFFcEMsSUFBWSxTQU1YO0FBTkQsV0FBWSxTQUFTO0lBQ25CLG1EQUFTLENBQUE7SUFDVCxxREFBVSxDQUFBO0lBQ1YsbURBQVMsQ0FBQTtJQUNULHFFQUFrQixDQUFBO0lBQ2xCLG1EQUFTLENBQUE7QUFDWCxDQUFDLEVBTlcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFNcEI7QUFFRCxTQUFnQixlQUFlLENBQUMsVUFBa0I7SUFDaEQsSUFBSSxrQ0FBa0MsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFDdkQsT0FBTyxTQUFTLENBQUMsa0JBQWtCLENBQUM7S0FDckM7U0FBTSxJQUFJLGtDQUFrQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUM5RCxPQUFPLFNBQVMsQ0FBQyxTQUFTLENBQUM7S0FDNUI7U0FBTSxJQUFJLGtDQUFrQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUM5RCxPQUFPLFNBQVMsQ0FBQyxTQUFTLENBQUM7S0FDNUI7U0FBTSxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFDcEMsT0FBTyxTQUFTLENBQUMsVUFBVSxDQUFDO0tBQzdCO1NBQU07UUFDTCxPQUFPLFNBQVMsQ0FBQyxTQUFTLENBQUM7S0FDNUI7QUFDSCxDQUFDO0FBWkQsMENBWUM7QUFFRCxTQUFnQixLQUFLLENBQUMsU0FBb0IsRUFBRSxVQUFrQjtJQUM1RCxRQUFRLFNBQVMsRUFBRTtRQUNqQixLQUFLLFNBQVMsQ0FBQyxrQkFBa0I7WUFDL0IsT0FBTyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzdDLEtBQUssU0FBUyxDQUFDLFNBQVM7WUFDdEIsT0FBTyxVQUFVLENBQUMsV0FBVyxFQUFFLENB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TyxHQUFnQixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ3ZDLEtBQUssTUFBTSxHQUFHLElBQUksSUFBSSxFQUFFO1FBQ3RCLE1BQU0sT0FBTyxHQUFXLEVBQUUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqRSxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDeEIsTUFBTSxJQUFJLG1CQUFRLENBQUMsdUJBQXVCLEVBQUUsdUNBQXVDLENBQUMsQ0FBQztTQUN0RjtRQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDdEI7SUFDRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBWkQsOEJBWUMiLCJmaWxlIjoibGliL2Nhc2Utc3R5bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgbW9kdWxlIGRlZmluZXMgdXRpbGl0eSBmdW5jdGlvbnMgdG8gZGV0ZWN0IGFuZCBjaGFuZ2UgY2FzZSBzdHlsZXMuXG4gKlxuICogQG1vZHVsZSBrcnlvL2Nhc2Utc3R5bGVcbiAqL1xuXG5pbXBvcnQgeyBJbmNpZGVudCB9IGZyb20gXCJpbmNpZGVudFwiO1xuXG5leHBvcnQgZW51bSBDYXNlU3R5bGUge1xuICBDYW1lbENhc2UsXG4gIFBhc2NhbENhc2UsXG4gIFNuYWtlQ2FzZSxcbiAgU2NyZWFtaW5nU25ha2VDYXNlLFxuICBLZWJhYkNhc2UsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RDYXNlU3R5bGUoaWRlbnRpZmllcjogc3RyaW5nKTogQ2FzZVN0eWxlIHtcbiAgaWYgKC9eW0EtWl0rWzAtOV0qKD86X1tBLVpdK1swLTldKikqJC8udGVzdChpZGVudGlmaWVyKSkge1xuICAgIHJldHVybiBDYXNlU3R5bGUuU2NyZWFtaW5nU25ha2VDYXNlO1xuICB9IGVsc2UgaWYgKC9eW2Etel0rWzAtOV0qKD86X1thLXpdK1swLTldKikrJC8udGVzdChpZGVudGlmaWVyKSkge1xuICAgIHJldHVybiBDYXNlU3R5bGUuU25ha2VDYXNlO1xuICB9IGVsc2UgaWYgKC9eW2Etel0rWzAtOV0qKD86LVthLXpdK1swLTldKikrJC8udGVzdChpZGVudGlmaWVyKSkge1xuICAgIHJldHVybiBDYXNlU3R5bGUuS2ViYWJDYXNlO1xuICB9IGVsc2UgaWYgKC9eW0EtWl0vLnRlc3QoaWRlbnRpZmllcikpIHtcbiAgICByZXR1cm4gQ2FzZVN0eWxlLlBhc2NhbENhc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIENhc2VTdHlsZS5DYW1lbENhc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0KGNhc2VTdHlsZTogQ2FzZVN0eWxlLCBpZGVudGlmaWVyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHN3aXRjaCAoY2FzZVN0eWxlKSB7XG4gICAgY2FzZSBDYXNlU3R5bGUuU2NyZWFtaW5nU25ha2VDYXNlOlxuICAgICAgcmV0dXJuIGlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5zcGxpdChcIl9cIik7XG4gICAgY2FzZSBDYXNlU3R5bGUuU25ha2VDYXNlOlxuICAgICAgcmV0dXJuIGlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5zcGxpdChcIl9cIik7XG4gICAgY2FzZSBDYXNlU3R5bGUuS2ViYWJDYXNlOlxuICAgICAgcmV0dXJuIGlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIik7XG4gICAgY2FzZSBDYXNlU3R5bGUuQ2FtZWxDYXNlOlxuICAgICAgcmV0dXJuIGlkZW50aWZpZXIuc3BsaXQoLyg/PVtBLVpdKS8pLm1hcCgocGFydDogc3RyaW5nKTogc3RyaW5nID0+IHBhcnQudG9Mb3dlckNhc2UoKSk7XG4gICAgY2FzZSBDYXNlU3R5bGUuUGFzY2FsQ2FzZTpcbiAgICAgIHJldHVybiBpZGVudGlmaWVyLnNwbGl0KC8oPz1bQS1aXSkvKS5tYXAoKHBhcnQ6IHN0cmluZyk6IHN0cmluZyA9PiBwYXJ0LnRvTG93ZXJDYXNlKCkpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgSW5jaWRlbnQoYEluY29tcGxldGVTd2l0Y2g6IFJlY2VpdmVkIHVuZXhwZWN0ZWQgdmFyaWFudCBmb3IgY2FzZVN0eWxlOiAke2Nhc2VTdHlsZX1gKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gam9pbihjYXNlU3R5bGU6IENhc2VTdHlsZSwgcGFydHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgc3dpdGNoIChjYXNlU3R5bGUpIHtcbiAgICBjYXNlIENhc2VTdHlsZS5TY3JlYW1pbmdTbmFrZUNhc2U6XG4gICAgICByZXR1cm4gcGFydHMuam9pbihcIl9cIikudG9VcHBlckNhc2UoKTtcbiAgICBjYXNlIENhc2VTdHlsZS5TbmFrZUNhc2U6XG4gICAgICByZXR1cm4gcGFydHMuam9pbihcIl9cIikudG9Mb3dlckNhc2UoKTtcbiAgICBjYXNlIENhc2VTdHlsZS5LZWJhYkNhc2U6XG4gICAgICByZXR1cm4gcGFydHMuam9pbihcIi1cIikudG9Mb3dlckNhc2UoKTtcbiAgICBjYXNlIENhc2VTdHlsZS5DYW1lbENhc2U6XG4gICAgICByZXR1cm4gcGFydHMubWFwKChwYXJ0OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCB1cHBlckxlbmd0aDogbnVtYmVyID0gaW5kZXggPT09IDAgPyAwIDogMTtcbiAgICAgICAgcmV0dXJuIHBhcnQuc3Vic3RyKDAsIHVwcGVyTGVuZ3RoKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcodXBwZXJMZW5ndGgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KS5qb2luKFwiXCIpO1xuICAgIGNhc2UgQ2FzZVN0eWxlLlBhc2NhbENhc2U6XG4gICAgICByZXR1cm4gcGFydHMubWFwKChwYXJ0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgICByZXR1cm4gcGFydC5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KS5qb2luKFwiXCIpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgSW5jaWRlbnQoYEluY29tcGxldGVTd2l0Y2g6IFJlY2VpdmVkIHVuZXhwZWN0ZWQgdmFyaWFudCBmb3IgY2FzZVN0eWxlOiAke2Nhc2VTdHlsZX1gKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuYW1lKGlkZW50aWZpZXI6IHN0cmluZywgdG86IENhc2VTdHlsZSk6IHN0cmluZztcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp1bmlmaWVkLXNpZ25hdHVyZXNcbmV4cG9ydCBmdW5jdGlvbiByZW5hbWUoaWRlbnRpZmllcjogc3RyaW5nLCBmcm9tOiBDYXNlU3R5bGUsIHRvOiBDYXNlU3R5bGUpOiBzdHJpbmc7XG5leHBvcnQgZnVuY3Rpb24gcmVuYW1lKGlkZW50aWZpZXI6IHN0cmluZywgZnJvbTogQ2FzZVN0eWxlLCB0bz86IENhc2VTdHlsZSk6IHN0cmluZyB7XG4gIGlmICh0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdG8gPSBmcm9tO1xuICAgIGZyb20gPSBkZXRlY3RDYXNlU3R5bGUoaWRlbnRpZmllcik7XG4gIH1cbiAgcmV0dXJuIGpvaW4odG8sIHNwbGl0KGZyb20sIGlkZW50aWZpZXIpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmFtZU1hcDxLIGV4dGVuZHMgc3RyaW5nPihrZXlzOiBJdGVyYWJsZTxLPiwgdG8/OiBDYXNlU3R5bGUpOiBNYXA8c3RyaW5nLCBLPiB7XG4gIGNvbnN0IHJlc3VsdDogTWFwPHN0cmluZywgSz4gPSBuZXcgTWFwKCk7XG4gIGNvbnN0IG91dEtleXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgY29uc3QgcmVuYW1lZDogc3RyaW5nID0gdG8gPT09IHVuZGVmaW5lZCA/IGtleSA6IHJlbmFtZShrZXksIHRvKTtcbiAgICByZXN1bHQuc2V0KHJlbmFtZWQsIGtleSk7XG4gICAgaWYgKG91dEtleXMuaGFzKHJlbmFtZWQpKSB7XG4gICAgICB0aHJvdyBuZXcgSW5jaWRlbnQoXCJOb25CaWplY3RpdmVLZXlSZW5hbWVcIiwgXCJTb21lIGtleXMgYXJlIHRoZSBzYW1lIGFmdGVyIHJlbmFtaW5nXCIpO1xuICAgIH1cbiAgICBvdXRLZXlzLmFkZChyZW5hbWVkKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sInNvdXJjZVJvb3QiOiIuLiJ9
