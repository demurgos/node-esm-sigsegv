import chai from "chai";
import unorm from "unorm";
import { CodepointStringType } from "../../lib/types/codepoint-string";
import { runTests } from "../helpers/test";
describe("CodepointStringType", function () {
    describe("basic support", function () {
        const type = new CodepointStringType({ maxCodepoints: 500, unorm });
        const items = [
            // Valid items
            { name: "\"\"", value: "", valid: true },
            { name: "\"Hello World!\"", value: "Hello World!", valid: true },
            { name: "Drop the bass", value: "‘Ç–Ø√ò«∑ ≈Å∆ï‡©¨ …É…Öœ®œû", valid: true },
            // Invalid items
            /* tslint:disable-next-line:no-construct */
            { name: "new String(\"stringObject\")", value: new String("stringObject"), valid: false },
            { name: "0.5", value: 0.5, valid: false },
            { name: "0.0001", value: 0.0001, valid: false },
            { name: "Infinity", value: Infinity, valid: false },
            { name: "-Infinity", value: -Infinity, valid: false },
            { name: "NaN", value: NaN, valid: false },
            { name: "undefined", value: undefined, valid: false },
            { name: "null", value: null, valid: false },
            { name: "true", value: true, valid: false },
            { name: "false", value: false, valid: false },
            { name: "[]", value: [], valid: false },
            { name: "{}", value: {}, valid: false },
            { name: "new Date()", value: new Date(), valid: false },
            { name: "/regex/", value: /regex/, valid: false },
        ];
        runTests(type, items);
    });
    describe("Ensure valid codepoints with Javascript (UCS2) strings", function () {
        it("should accept the empty string, when requiring length exactly 0", function () {
            chai.assert.isTrue(new CodepointStringType({ minCodepoints: 0, maxCodepoints: 0, unorm }).test(""));
        });
        it("should accept the string \"a\" (ASCII codepoint), when requiring length exactly 1", function () {
            chai.assert.isTrue(new CodepointStringType({ minCodepoints: 1, maxCodepoints: 1, unorm }).test("a"));
        });
        it("should accept the string \"‚àë\" (BMP codepoint), when requiring length exactly 1", function () {
            chai.assert.isTrue(new CodepointStringType({ minCodepoints: 1, maxCodepoints: 1, unorm }).test("‚àë"));
        });
        it("should reject the string \"ùÑû\" (non-BMP codepoint), when requiring length exactly 2", function () {
            chai.assert.isFalse(new CodepointStringType({ minCodepoints: 2, maxCodepoints: 2, unorm }).test("ùÑû"));
        });
        it("should accept the string \"ùÑû\" (non-BMP codepoint), when requiring length exactly 1", function () {
            chai.assert.isTrue(new CodepointStringType({ minCodepoints: 1, maxCodepoints: 1, unorm }).test("ùÑû"));
        });
        describe("should reject unmatched surrogate halves", function () {
            // ùÑû corresponds to the surrogate pair (0xd834, 0xdd1e)
            const type = new CodepointStringType({ maxCodepoints: 500, unorm });
            const items = ["\ud834", "a\ud834", "\ud834b", "a\ud834b", "\udd1e", "a\udd1e", "\udd1eb", "a\udd1eb"];
            for (const item of items) {
                it(JSON.stringify(item), function () {
                    chai.assert.isFalse(type.test(item));
                });
            }
        });
        it("should reject reversed (invalid) surrogate pairs", function () {
            chai.assert.isFalse(new CodepointStringType({ maxCodepoints: 500, unorm }).test("\udd1e\ud834"));
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3R5cGVzL2NvZGVwb2ludC1zdHJpbmcuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLElBQUksTUFBTSxNQUFNLENBQUM7QUFDeEIsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQzFCLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxRQUFRLEVBQWMsTUFBTSxpQkFBaUIsQ0FBQztBQUV2RCxRQUFRLENBQUMscUJBQXFCLEVBQUU7SUFDOUIsUUFBUSxDQUFDLGVBQWUsRUFBRTtRQUN4QixNQUFNLElBQUksR0FBd0IsSUFBSSxtQkFBbUIsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztRQUV2RixNQUFNLEtBQUssR0FBaUI7WUFDMUIsY0FBYztZQUNkLEVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUM7WUFDdEMsRUFBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDO1lBQzlELEVBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUM7WUFDNUQsZ0JBQWdCO1lBQ2hCLDJDQUEyQztZQUMzQyxFQUFDLElBQUksRUFBRSw4QkFBOEIsRUFBRSxLQUFLLEVBQUUsSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBQztZQUN2RixFQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFDO1lBQ3ZDLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUM7WUFDN0MsRUFB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LEVBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3RHLENBQUMsQ0FBQyxDQUFDO1FBQ0gsUUFBUSxDQUFDLDBDQUEwQyxFQUFFO1lBQ25ELHdEQUF3RDtZQUN4RCxNQUFNLElBQUksR0FBd0IsSUFBSSxtQkFBbUIsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztZQUN2RixNQUFNLEtBQUssR0FBYSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNqSCxLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRTtnQkFDeEIsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDdkMsQ0FBQyxDQUFDLENBQUM7YUFDSjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLGtEQUFrRCxFQUFFO1lBQ3JELElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksbUJBQW1CLENBQUMsRUFBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDakcsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdHlwZXMvY29kZXBvaW50LXN0cmluZy5zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSBcImNoYWlcIjtcbmltcG9ydCB1bm9ybSBmcm9tIFwidW5vcm1cIjtcbmltcG9ydCB7IENvZGVwb2ludFN0cmluZ1R5cGUgfSBmcm9tIFwiLi4vLi4vbGliL3R5cGVzL2NvZGVwb2ludC1zdHJpbmdcIjtcbmltcG9ydCB7IHJ1blRlc3RzLCBUeXBlZFZhbHVlIH0gZnJvbSBcIi4uL2hlbHBlcnMvdGVzdFwiO1xuXG5kZXNjcmliZShcIkNvZGVwb2ludFN0cmluZ1R5cGVcIiwgZnVuY3Rpb24gKCkge1xuICBkZXNjcmliZShcImJhc2ljIHN1cHBvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHR5cGU6IENvZGVwb2ludFN0cmluZ1R5cGUgPSBuZXcgQ29kZXBvaW50U3RyaW5nVHlwZSh7bWF4Q29kZXBvaW50czogNTAwLCB1bm9ybX0pO1xuXG4gICAgY29uc3QgaXRlbXM6IFR5cGVkVmFsdWVbXSA9IFtcbiAgICAgIC8vIFZhbGlkIGl0ZW1zXG4gICAgICB7bmFtZTogXCJcXFwiXFxcIlwiLCB2YWx1ZTogXCJcIiwgdmFsaWQ6IHRydWV9LFxuICAgICAge25hbWU6IFwiXFxcIkhlbGxvIFdvcmxkIVxcXCJcIiwgdmFsdWU6IFwiSGVsbG8gV29ybGQhXCIsIHZhbGlkOiB0cnVlfSxcbiAgICAgIHtuYW1lOiBcIkRyb3AgdGhlIGJhc3NcIiwgdmFsdWU6IFwi1ILQr8OYx7cgxYHGleCprCDJg8mFz6jPnlwiLCB2YWxpZDogdHJ1ZX0sXG4gICAgICAvLyBJbnZhbGlkIGl0ZW1zXG4gICAgICAvKiB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc3RydWN0ICovXG4gICAgICB7bmFtZTogXCJuZXcgU3RyaW5nKFxcXCJzdHJpbmdPYmplY3RcXFwiKVwiLCB2YWx1ZTogbmV3IFN0cmluZyhcInN0cmluZ09iamVjdFwiKSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcIjAuNVwiLCB2YWx1ZTogMC41LCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwiMC4wMDAxXCIsIHZhbHVlOiAwLjAwMDEsIHZhbGlkOiBmYWxzZX0sXG4gICAgICB7bmFtZTogXCJJbmZpbml0eVwiLCB2YWx1ZTogSW5maW5pdHksIHZhbGlkOiBmYWxzZX0sXG4gICAgICB7bmFtZTogXCItSW5maW5pdHlcIiwgdmFsdWU6IC1JbmZpbml0eSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcIk5hTlwiLCB2YWx1ZTogTmFOLCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwidW5kZWZpbmVkXCIsIHZhbHVlOiB1bmRlZmluZWQsIHZhbGlkOiBmYWxzZX0sXG4gICAgICB7bmFtZTogXCJudWxsXCIsIHZhbHVlOiBudWxsLCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwidHJ1ZVwiLCB2YWx1ZTogdHJ1ZSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcImZhbHNlXCIsIHZhbHVlOiBmYWxzZSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcIltdXCIsIHZhbHVlOiBbXSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcInt9XCIsIHZhbHVlOiB7fSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIHtuYW1lOiBcIm5ldyBEYXRlKClcIiwgdmFsdWU6IG5ldyBEYXRlKCksIHZhbGlkOiBmYWxzZX0sXG4gICAgICB7bmFtZTogXCIvcmVnZXgvXCIsIHZhbHVlOiAvcmVnZXgvLCB2YWxpZDogZmFsc2V9LFxuICAgIF07XG5cbiAgICBydW5UZXN0cyh0eXBlLCBpdGVtcyk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiRW5zdXJlIHZhbGlkIGNvZGVwb2ludHMgd2l0aCBKYXZhc2NyaXB0IChVQ1MyKSBzdHJpbmdzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpdChcInNob3VsZCBhY2NlcHQgdGhlIGVtcHR5IHN0cmluZywgd2hlbiByZXF1aXJpbmcgbGVuZ3RoIGV4YWN0bHkgMFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc1RydWUobmV3IENvZGVwb2ludFN0cmluZ1R5cGUoe21pbkNvZGVwb2ludHM6IDAsIG1heENvZGVwb2ludHM6IDAsIHVub3JtfSkudGVzdChcIlwiKSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgYWNjZXB0IHRoZSBzdHJpbmcgXFxcImFcXFwiIChBU0NJSSBjb2RlcG9pbnQpLCB3aGVuIHJlcXVpcmluZyBsZW5ndGggZXhhY3RseSAxXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYWkuYXNzZXJ0LmlzVHJ1ZShuZXcgQ29kZXBvaW50U3RyaW5nVHlwZSh7bWluQ29kZXBvaW50czogMSwgbWF4Q29kZXBvaW50czogMSwgdW5vcm19KS50ZXN0KFwiYVwiKSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgYWNjZXB0IHRoZSBzdHJpbmcgXFxcIuKIkVxcXCIgKEJNUCBjb2RlcG9pbnQpLCB3aGVuIHJlcXVpcmluZyBsZW5ndGggZXhhY3RseSAxXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYWkuYXNzZXJ0LmlzVHJ1ZShuZXcgQ29kZXBvaW50U3RyaW5nVHlwZSh7bWluQ29kZXBvaW50czogMSwgbWF4Q29kZXBvaW50czogMSwgdW5vcm19KS50ZXN0KFwi4oiRXCIpKTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCByZWplY3QgdGhlIHN0cmluZyBcXFwi8J2EnlxcXCIgKG5vbi1CTVAgY29kZXBvaW50KSwgd2hlbiByZXF1aXJpbmcgbGVuZ3RoIGV4YWN0bHkgMlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc0ZhbHNlKG5ldyBDb2RlcG9pbnRTdHJpbmdUeXBlKHttaW5Db2RlcG9pbnRzOiAyLCBtYXhDb2RlcG9pbnRzOiAyLCB1bm9ybX0pLnRlc3QoXCLwnYSeXCIpKTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBhY2NlcHQgdGhlIHN0cmluZyBcXFwi8J2EnlxcXCIgKG5vbi1CTVAgY29kZXBvaW50KSwgd2hlbiByZXF1aXJpbmcgbGVuZ3RoIGV4YWN0bHkgMVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc1RydWUobmV3IENvZGVwb2ludFN0cmluZ1R5cGUoe21pbkNvZGVwb2ludHM6IDEsIG1heENvZGVwb2ludHM6IDEsIHVub3JtfSkudGVzdChcIvCdhJ5cIikpO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwic2hvdWxkIHJlamVjdCB1bm1hdGNoZWQgc3Vycm9nYXRlIGhhbHZlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyDwnYSeIGNvcnJlc3BvbmRzIHRvIHRoZSBzdXJyb2dhdGUgcGFpciAoMHhkODM0LCAweGRkMWUpXG4gICAgICBjb25zdCB0eXBlOiBDb2RlcG9pbnRTdHJpbmdUeXBlID0gbmV3IENvZGVwb2ludFN0cmluZ1R5cGUoe21heENvZGVwb2ludHM6IDUwMCwgdW5vcm19KTtcbiAgICAgIGNvbnN0IGl0ZW1zOiBzdHJpbmdbXSA9IFtcIlxcdWQ4MzRcIiwgXCJhXFx1ZDgzNFwiLCBcIlxcdWQ4MzRiXCIsIFwiYVxcdWQ4MzRiXCIsIFwiXFx1ZGQxZVwiLCBcImFcXHVkZDFlXCIsIFwiXFx1ZGQxZWJcIiwgXCJhXFx1ZGQxZWJcIl07XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgaXQoSlNPTi5zdHJpbmdpZnkoaXRlbSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjaGFpLmFzc2VydC5pc0ZhbHNlKHR5cGUudGVzdChpdGVtKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIHJlamVjdCByZXZlcnNlZCAoaW52YWxpZCkgc3Vycm9nYXRlIHBhaXJzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYWkuYXNzZXJ0LmlzRmFsc2UobmV3IENvZGVwb2ludFN0cmluZ1R5cGUoe21heENvZGVwb2ludHM6IDUwMCwgdW5vcm19KS50ZXN0KFwiXFx1ZGQxZVxcdWQ4MzRcIikpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLiJ9
