import chai from "chai";
import { Float64Type } from "../../lib/types/float64";
import { runTests } from "../helpers/test";
describe("Float64Type", function () {
    const $Float64 = new Float64Type();
    const items = [
        {
            name: "0",
            value: 0,
            valid: true,
            output: {
                json: "0",
            },
        },
        { name: "1", value: 1, valid: true },
        { name: "-1", value: -1, valid: true },
        { name: "2", value: 2, valid: true },
        { name: "1e3", value: 1e3, valid: true },
        { name: "-1e3", value: 1e3, valid: true },
        { name: "Number.MAX_SAFE_INTEGER", value: Number.MAX_SAFE_INTEGER, valid: true },
        { name: "Number.MIN_SAFE_INTEGER", value: Number.MIN_SAFE_INTEGER, valid: true },
        { name: "Number.MAX_VALUE", value: Number.MAX_VALUE, valid: true },
        { name: "0.5", value: 0.5, valid: true },
        { name: "0.0001", value: 0.0001, valid: true },
        { name: "Number.EPSILON", value: Number.EPSILON, valid: true },
        // tslint:disable-next-line:no-construct
        { name: "new Number(1)", value: new Number(1), valid: false },
        { name: "\"\"", value: "", valid: false },
        { name: "\"0\"", value: "0", valid: false },
        { name: "Infinity", value: Infinity, valid: false },
        { name: "-Infinity", value: -Infinity, valid: false },
        { name: "NaN", value: NaN, valid: false },
        { name: "\"true\"", value: "true", valid: false },
        { name: "\"false\"", value: "false", valid: false },
        { name: "undefined", value: undefined, valid: false },
        { name: "null", value: null, valid: false },
        { name: "[]", value: [], valid: false },
        { name: "{}", value: {}, valid: false },
        { name: "new Date()", value: new Date(), valid: false },
        { name: "/regex/", value: /regex/, valid: false },
    ];
    runTests($Float64, items);
    describe("NaN support", function () {
        const $Float64WithNan = new Float64Type({ allowNaN: true });
        const items = [
            { name: "0", value: 0, valid: true },
            { name: "1", value: 1, valid: true },
            { name: "NaN", value: NaN, valid: true },
            // tslint:disable-next-line:no-construct
            { name: "new Number(NaN)", value: new Number(NaN), valid: false },
            { name: "Infinity", value: Infinity, valid: false },
            { name: "-Infinity", value: -Infinity, valid: false },
        ];
        runTests($Float64WithNan, items);
        it("Should treat two `NaN` values as equal", function () {
            chai.assert.isTrue($Float64WithNan.equals(NaN, NaN));
        });
    });
    describe("Infinity support", function () {
        const $Float64WithInfinity = new Float64Type({ allowInfinity: true });
        const items = [
            { name: "0", value: 0, valid: true },
            { name: "1", value: 1, valid: true },
            { name: "Infinity", value: Infinity, valid: true },
            { name: "-Infinity", value: -Infinity, valid: true },
            // tslint:disable-next-line:no-construct
            { name: "new Number(Infinity)", value: new Number(Infinity), valid: false },
            // tslint:disable-next-line:no-construct
            { name: "new Number(-Infinity)", value: new Number(-Infinity), valid: false },
            { name: "NaN", value: NaN, valid: false },
        ];
        runTests($Float64WithInfinity, items);
        it("should return `true` for `.equals(Infinity, Infinity)`", function () {
            chai.assert.isTrue($Float64WithInfinity.equals(Infinity, Infinity));
        });
        it("should return `true` for `.equals(-Infinity, -Infinity)`", function () {
            chai.assert.isTrue($Float64WithInfinity.equals(-Infinity, -Infinity));
        });
        it("should return `false` for `.equals(-Infinity, Infinity)`", function () {
            chai.assert.isFalse($Float64WithInfinity.equals(-Infinity, Infinity));
        });
        it("should return `false` for `.equals(Infinity, -Infinity)`", function () {
            chai.assert.isFalse($Float64WithInfinity.equals(Infinity, -Infinity));
        });
    });
    describe("lte", function () {
        const $Float64 = new Float64Type({ allowNaN: true, allowInfinity: true });
        const values = [-Infinity, -1, -0, +0, +1, +Infinity, NaN];
        const testItems = [];
        for (let i = 0; i < values.length; i++) {
            for (let j = 0; j < values.length; j++) {
                testItems.push({ left: values[i], right: values[j], expected: i <= j });
            }
        }
        for (const { left, right, expected } of testItems) {
            it(`.lte(${left}, ${right}) should return ${expected}`, function () {
                chai.assert.strictEqual($Float64.lte(left, right), expected);
            });
        }
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3R5cGVzL2Zsb2F0NjQuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLElBQUksTUFBTSxNQUFNLENBQUM7QUFDeEIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxRQUFRLEVBQWMsTUFBTSxpQkFBaUIsQ0FBQztBQUV2RCxRQUFRLENBQUMsYUFBYSxFQUFFO0lBQ3RCLE1BQU0sUUFBUSxHQUFnQixJQUFJLFdBQVcsRUFBRSxDQUFDO0lBRWhELE1BQU0sS0FBSyxHQUFpQjtRQUMxQjtZQUNFLElBQUksRUFBRSxHQUFHO1lBQ1QsS0FBSyxFQUFFLENBQUM7WUFDUixLQUFLLEVBQUUsSUFBSTtZQUNYLE1BQU0sRUFBRTtnQkFDTixJQUFJLEVBQUUsR0FBRzthQUNWO1NBQ0Y7UUFDRCxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDO1FBQ2xDLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQztRQUNwQyxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDO1FBQ2xDLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUM7UUFDdEMsRUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQztRQUN2QyxFQUFDLElBQUksRUFBRSx5QkFBeUIsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUM7UUFDOUUsRUFBQyxJQUFJLEVBQUUseUJBQXlCLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FB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aW1wb3J0IGNoYWkgZnJvbSBcImNoYWlcIjtcbmltcG9ydCB7IEZsb2F0NjRUeXBlIH0gZnJvbSBcIi4uLy4uL2xpYi90eXBlcy9mbG9hdDY0XCI7XG5pbXBvcnQgeyBydW5UZXN0cywgVHlwZWRWYWx1ZSB9IGZyb20gXCIuLi9oZWxwZXJzL3Rlc3RcIjtcblxuZGVzY3JpYmUoXCJGbG9hdDY0VHlwZVwiLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0ICRGbG9hdDY0OiBGbG9hdDY0VHlwZSA9IG5ldyBGbG9hdDY0VHlwZSgpO1xuXG4gIGNvbnN0IGl0ZW1zOiBUeXBlZFZhbHVlW10gPSBbXG4gICAge1xuICAgICAgbmFtZTogXCIwXCIsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIGpzb246IFwiMFwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtuYW1lOiBcIjFcIiwgdmFsdWU6IDEsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCItMVwiLCB2YWx1ZTogLTEsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCIyXCIsIHZhbHVlOiAyLCB2YWxpZDogdHJ1ZX0sXG4gICAge25hbWU6IFwiMWUzXCIsIHZhbHVlOiAxZTMsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCItMWUzXCIsIHZhbHVlOiAxZTMsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCJOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlwiLCB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCJOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlwiLCB2YWx1ZTogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCJOdW1iZXIuTUFYX1ZBTFVFXCIsIHZhbHVlOiBOdW1iZXIuTUFYX1ZBTFVFLCB2YWxpZDogdHJ1ZX0sXG4gICAge25hbWU6IFwiMC41XCIsIHZhbHVlOiAwLjUsIHZhbGlkOiB0cnVlfSxcbiAgICB7bmFtZTogXCIwLjAwMDFcIiwgdmFsdWU6IDAuMDAwMSwgdmFsaWQ6IHRydWV9LFxuICAgIHtuYW1lOiBcIk51bWJlci5FUFNJTE9OXCIsIHZhbHVlOiBOdW1iZXIuRVBTSUxPTiwgdmFsaWQ6IHRydWV9LFxuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnN0cnVjdFxuICAgIHtuYW1lOiBcIm5ldyBOdW1iZXIoMSlcIiwgdmFsdWU6IG5ldyBOdW1iZXIoMSksIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiXFxcIlxcXCJcIiwgdmFsdWU6IFwiXCIsIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiXFxcIjBcXFwiXCIsIHZhbHVlOiBcIjBcIiwgdmFsaWQ6IGZhbHNlfSxcbiAgICB7bmFtZTogXCJJbmZpbml0eVwiLCB2YWx1ZTogSW5maW5pdHksIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiLUluZmluaXR5XCIsIHZhbHVlOiAtSW5maW5pdHksIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiTmFOXCIsIHZhbHVlOiBOYU4sIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiXFxcInRydWVcXFwiXCIsIHZhbHVlOiBcInRydWVcIiwgdmFsaWQ6IGZhbHNlfSxcbiAgICB7bmFtZTogXCJcXFwiZmFsc2VcXFwiXCIsIHZhbHVlOiBcImZhbHNlXCIsIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwidW5kZWZpbmVkXCIsIHZhbHVlOiB1bmRlZmluZWQsIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwibnVsbFwiLCB2YWx1ZTogbnVsbCwgdmFsaWQ6IGZhbHNlfSxcbiAgICB7bmFtZTogXCJbXVwiLCB2YWx1ZTogW10sIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwie31cIiwgdmFsdWU6IHt9LCB2YWxpZDogZmFsc2V9LFxuICAgIHtuYW1lOiBcIm5ldyBEYXRlKClcIiwgdmFsdWU6IG5ldyBEYXRlKCksIHZhbGlkOiBmYWxzZX0sXG4gICAge25hbWU6IFwiL3JlZ2V4L1wiLCB2YWx1ZTogL3JlZ2V4LywgdmFsaWQ6IGZhbHNlfSxcbiAgXTtcblxuICBydW5UZXN0cygkRmxvYXQ2NCwgaXRlbXMpO1xuXG4gIGRlc2NyaWJlKFwiTmFOIHN1cHBvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0ICRGbG9hdDY0V2l0aE5hbjogRmxvYXQ2NFR5cGUgPSBuZXcgRmxvYXQ2NFR5cGUoe2FsbG93TmFOOiB0cnVlfSk7XG4gICAgY29uc3QgaXRlbXM6IFR5cGVkVmFsdWVbXSA9IFtcbiAgICAgIHtuYW1lOiBcIjBcIiwgdmFsdWU6IDAsIHZhbGlkOiB0cnVlfSxcbiAgICAgIHtuYW1lOiBcIjFcIiwgdmFsdWU6IDEsIHZhbGlkOiB0cnVlfSxcbiAgICAgIHtuYW1lOiBcIk5hTlwiLCB2YWx1ZTogTmFOLCB2YWxpZDogdHJ1ZX0sXG5cbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zdHJ1Y3RcbiAgICAgIHtuYW1lOiBcIm5ldyBOdW1iZXIoTmFOKVwiLCB2YWx1ZTogbmV3IE51bWJlcihOYU4pLCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwiSW5maW5pdHlcIiwgdmFsdWU6IEluZmluaXR5LCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwiLUluZmluaXR5XCIsIHZhbHVlOiAtSW5maW5pdHksIHZhbGlkOiBmYWxzZX0sXG4gICAgXTtcblxuICAgIHJ1blRlc3RzKCRGbG9hdDY0V2l0aE5hbiwgaXRlbXMpO1xuXG4gICAgaXQoXCJTaG91bGQgdHJlYXQgdHdvIGBOYU5gIHZhbHVlcyBhcyBlcXVhbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc1RydWUoJEZsb2F0NjRXaXRoTmFuLmVxdWFscyhOYU4sIE5hTikpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkluZmluaXR5IHN1cHBvcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0ICRGbG9hdDY0V2l0aEluZmluaXR5OiBGbG9hdDY0VHlwZSA9IG5ldyBGbG9hdDY0VHlwZSh7YWxsb3dJbmZpbml0eTogdHJ1ZX0pO1xuICAgIGNvbnN0IGl0ZW1zOiBUeXBlZFZhbHVlW10gPSBbXG4gICAgICB7bmFtZTogXCIwXCIsIHZhbHVlOiAwLCB2YWxpZDogdHJ1ZX0sXG4gICAgICB7bmFtZTogXCIxXCIsIHZhbHVlOiAxLCB2YWxpZDogdHJ1ZX0sXG4gICAgICB7bmFtZTogXCJJbmZpbml0eVwiLCB2YWx1ZTogSW5maW5pdHksIHZhbGlkOiB0cnVlfSxcbiAgICAgIHtuYW1lOiBcIi1JbmZpbml0eVwiLCB2YWx1ZTogLUluZmluaXR5LCB2YWxpZDogdHJ1ZX0sXG5cbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zdHJ1Y3RcbiAgICAgIHtuYW1lOiBcIm5ldyBOdW1iZXIoSW5maW5pdHkpXCIsIHZhbHVlOiBuZXcgTnVtYmVyKEluZmluaXR5KSwgdmFsaWQ6IGZhbHNlfSxcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zdHJ1Y3RcbiAgICAgIHtuYW1lOiBcIm5ldyBOdW1iZXIoLUluZmluaXR5KVwiLCB2YWx1ZTogbmV3IE51bWJlcigtSW5maW5pdHkpLCB2YWxpZDogZmFsc2V9LFxuICAgICAge25hbWU6IFwiTmFOXCIsIHZhbHVlOiBOYU4sIHZhbGlkOiBmYWxzZX0sXG4gICAgXTtcblxuICAgIHJ1blRlc3RzKCRGbG9hdDY0V2l0aEluZmluaXR5LCBpdGVtcyk7XG5cbiAgICBpdChcInNob3VsZCByZXR1cm4gYHRydWVgIGZvciBgLmVxdWFscyhJbmZpbml0eSwgSW5maW5pdHkpYFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc1RydWUoJEZsb2F0NjRXaXRoSW5maW5pdHkuZXF1YWxzKEluZmluaXR5LCBJbmZpbml0eSkpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIGB0cnVlYCBmb3IgYC5lcXVhbHMoLUluZmluaXR5LCAtSW5maW5pdHkpYFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFpLmFzc2VydC5pc1RydWUoJEZsb2F0NjRXaXRoSW5maW5pdHkuZXF1YWxzKC1JbmZpbml0eSwgLUluZmluaXR5KSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZXR1cm4gYGZhbHNlYCBmb3IgYC5lcXVhbHMoLUluZmluaXR5LCBJbmZpbml0eSlgXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYWkuYXNzZXJ0LmlzRmFsc2UoJEZsb2F0NjRXaXRoSW5maW5pdHkuZXF1YWxzKC1JbmZpbml0eSwgSW5maW5pdHkpKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiBgZmFsc2VgIGZvciBgLmVxdWFscyhJbmZpbml0eSwgLUluZmluaXR5KWBcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hhaS5hc3NlcnQuaXNGYWxzZSgkRmxvYXQ2NFdpdGhJbmZpbml0eS5lcXVhbHMoSW5maW5pdHksIC1JbmZpbml0eSkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImx0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgJEZsb2F0NjQ6IEZsb2F0NjRUeXBlID0gbmV3IEZsb2F0NjRUeXBlKHthbGxvd05hTjogdHJ1ZSwgYWxsb3dJbmZpbml0eTogdHJ1ZX0pO1xuXG4gICAgaW50ZXJmYWNlIFRlc3RJdGVtIHtcbiAgICAgIGxlZnQ6IG51bWJlcjtcbiAgICAgIHJpZ2h0OiBudW1iZXI7XG4gICAgICBleHBlY3RlZDogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZXM6IG51bWJlcltdID0gWy1JbmZpbml0eSwgLTEsIC0wLCArMCwgKzEsICtJbmZpbml0eSwgTmFOXTtcbiAgICBjb25zdCB0ZXN0SXRlbXM6IFRlc3RJdGVtW10gPSBbXTtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdmFsdWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRlc3RJdGVtcy5wdXNoKHtsZWZ0OiB2YWx1ZXNbaV0sIHJpZ2h0OiB2YWx1ZXNbal0sIGV4cGVjdGVkOiBpIDw9IGp9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHtsZWZ0LCByaWdodCwgZXhwZWN0ZWR9IG9mIHRlc3RJdGVtcykge1xuICAgICAgaXQoYC5sdGUoJHtsZWZ0fSwgJHtyaWdodH0pIHNob3VsZCByZXR1cm4gJHtleHBlY3RlZH1gLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYWkuYXNzZXJ0LnN0cmljdEVxdWFsKCRGbG9hdDY0Lmx0ZShsZWZ0LCByaWdodCksIGV4cGVjdGVkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
